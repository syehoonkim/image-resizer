```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Image Resizer (No Server)</title>
    <style>
      :root {
        --bg: #0b0f1a;
        --card: #121a2b;
        --card2: #0f1626;
        --text: #e8eefc;
        --muted: #a8b3d6;
        --line: rgba(255, 255, 255, 0.12);
        --accent: #6aa6ff;
        --accent2: #9ef0ff;
        --danger: #ff6a6a;
        --shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
        --radius: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Noto Sans KR", Arial, sans-serif;
        background: radial-gradient(
            1200px 900px at 15% 10%,
            rgba(106, 166, 255, 0.22),
            transparent 55%
          ),
          radial-gradient(
            900px 700px at 80% 15%,
            rgba(158, 240, 255, 0.14),
            transparent 55%
          ),
          linear-gradient(180deg, var(--bg), #070a12 60%);
        color: var(--text);
      }
      .wrap {
        max-width: 1100px;
        margin: 28px auto;
        padding: 0 16px 40px;
      }
      header {
        display: flex;
        gap: 14px;
        align-items: flex-end;
        justify-content: space-between;
        margin-bottom: 18px;
      }
      h1 {
        font-size: 22px;
        margin: 0;
        letter-spacing: 0.2px;
      }
      .sub {
        margin: 6px 0 0;
        color: var(--muted);
        font-size: 13px;
      }
      .grid {
        display: grid;
        grid-template-columns: 420px 1fr;
        gap: 16px;
        align-items: start;
      }
      @media (max-width: 980px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .card {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .card h2 {
        font-size: 15px;
        margin: 0;
        padding: 14px 16px;
        border-bottom: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.12);
      }
      .card .content {
        padding: 14px 16px 16px;
      }
      .drop {
        border: 1px dashed rgba(255, 255, 255, 0.25);
        border-radius: 16px;
        padding: 18px;
        background: rgba(0, 0, 0, 0.12);
        transition: 0.15s ease;
      }
      .drop.dragover {
        border-color: var(--accent2);
        background: rgba(158, 240, 255, 0.08);
        transform: translateY(-1px);
      }
      .row {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      .row.wrapline {
        flex-wrap: wrap;
      }
      .btn {
        appearance: none;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: linear-gradient(
          180deg,
          rgba(106, 166, 255, 0.18),
          rgba(106, 166, 255, 0.08)
        );
        color: var(--text);
        padding: 10px 12px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 13px;
        transition: 0.15s ease;
        user-select: none;
      }
      .btn:hover {
        transform: translateY(-1px);
        border-color: rgba(255, 255, 255, 0.28);
      }
      .btn:active {
        transform: translateY(0px);
      }
      .btn.secondary {
        background: rgba(0, 0, 0, 0.12);
      }
      .btn.danger {
        background: rgba(255, 106, 106, 0.14);
        border-color: rgba(255, 106, 106, 0.25);
        color: #ffd2d2;
      }
      input[type="file"] {
        display: none;
      }
      .meta {
        margin-top: 12px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }
      .pill {
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(0, 0, 0, 0.12);
        border-radius: 12px;
        padding: 10px 10px;
        font-size: 12px;
        color: var(--muted);
        line-height: 1.25;
      }
      .pill b {
        color: var(--text);
        font-weight: 700;
      }
      .form {
        display: grid;
        gap: 12px;
      }
      label {
        font-size: 12px;
        color: var(--muted);
        display: block;
        margin-bottom: 6px;
      }
      .field {
        background: rgba(0, 0, 0, 0.12);
        border: 1px solid rgba(255, 255, 255, 0.14);
        border-radius: 14px;
        padding: 10px;
      }
      .field input[type="number"],
      .field select {
        width: 100%;
        border: 0;
        outline: none;
        background: transparent;
        color: var(--text);
        font-size: 14px;
        padding: 2px 2px;
      }
      .field select option {
        background: #0c1220;
        color: var(--text);
      }
      .two {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      .toggle {
        display: flex;
        gap: 10px;
        align-items: center;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(0, 0, 0, 0.12);
        cursor: pointer;
        user-select: none;
      }
      .toggle input {
        accent-color: var(--accent);
      }
      .help {
        font-size: 12px;
        color: var(--muted);
        margin-top: 8px;
      }
      .preview {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }
      @media (max-width: 980px) {
        .preview {
          grid-template-columns: 1fr;
        }
      }
      .imgbox {
        padding: 14px 16px 16px;
      }
      .imgframe {
        border: 1px solid rgba(255, 255, 255, 0.14);
        border-radius: 16px;
        background: rgba(0, 0, 0, 0.12);
        overflow: hidden;
        position: relative;
        min-height: 240px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .imgframe img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        max-height: 460px;
        display: none;
      }
      .imgframe .empty {
        color: rgba(232, 238, 252, 0.55);
        font-size: 13px;
        padding: 20px;
        text-align: center;
      }
      .badge {
        position: absolute;
        left: 12px;
        top: 12px;
        font-size: 12px;
        padding: 6px 9px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        background: rgba(0, 0, 0, 0.28);
        color: rgba(232, 238, 252, 0.9);
        backdrop-filter: blur(6px);
      }
      .footerbar {
        margin-top: 12px;
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
      }
      .small {
        font-size: 12px;
        color: var(--muted);
      }
      .range {
        display: flex;
        gap: 10px;
        align-items: center;
      }
      input[type="range"] {
        width: 100%;
        accent-color: var(--accent2);
      }
      .toast {
        margin-top: 12px;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.16);
        background: rgba(0, 0, 0, 0.16);
        color: var(--muted);
        font-size: 12px;
        display: none;
      }
      .toast.show {
        display: block;
      }
      .mono {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", monospace;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div>
          <h1>Image Resizer (클라이언트-only)</h1>
          <div class="sub">
            서버 없이 브라우저에서 이미지 리사이징 / 포맷 변환 / 다운로드
          </div>
        </div>
      </header>

      <div class="grid">
        <!-- LEFT -->
        <section class="card">
          <h2>1) 이미지 업로드</h2>
          <div class="content">
            <div id="drop" class="drop">
              <div class="row wrapline" style="justify-content: space-between">
                <div style="min-width: 220px">
                  <div style="font-weight: 700; font-size: 14px">
                    드래그&드롭 또는 파일 선택
                  </div>
                  <div class="help">
                    지원: JPG / PNG / WebP 등 (브라우저가 열 수 있는 이미지)
                  </div>
                </div>
                <div class="row">
                  <label class="btn secondary" for="file">파일 선택</label>
                  <button id="clear" class="btn danger" type="button">
                    초기화
                  </button>
                </div>
              </div>
            </div>

            <input id="file" type="file" accept="image/*" />

            <div class="meta">
              <div class="pill">
                <div><b>원본 크기</b></div>
                <div id="metaDim" class="mono">-</div>
              </div>
              <div class="pill">
                <div><b>원본 용량</b></div>
                <div id="metaSize" class="mono">-</div>
              </div>
              <div class="pill">
                <div><b>원본 타입</b></div>
                <div id="metaType" class="mono">-</div>
              </div>
              <div class="pill">
                <div><b>파일명</b></div>
                <div id="metaName" class="mono">-</div>
              </div>
            </div>

            <div id="toast" class="toast"></div>
          </div>
        </section>

        <!-- RIGHT -->
        <section class="card">
          <h2>2) 리사이징 / 포맷 설정</h2>
          <div class="content">
            <div class="form">
              <div class="two">
                <div>
                  <label>가로(px)</label>
                  <div class="field">
                    <input id="w" type="number" min="1" step="1" value="1920" />
                  </div>
                </div>
                <div>
                  <label>세로(px)</label>
                  <div class="field">
                    <input id="h" type="number" min="1" step="1" value="1080" />
                  </div>
                </div>
              </div>

              <div class="toggle" id="lockWrap" title="비율 유지">
                <input id="lock" type="checkbox" checked />
                <div>
                  <div style="font-weight: 700; font-size: 13px">
                    비율 유지(잠금)
                  </div>
                  <div class="help" style="margin-top: 2px">
                    한쪽을 바꾸면 다른쪽이 자동 계산됩니다.
                  </div>
                </div>
              </div>

              <div class="two">
                <div>
                  <label>출력 포맷</label>
                  <div class="field">
                    <select id="fmt">
                      <option value="image/png">PNG (무손실)</option>
                      <option value="image/jpeg" selected>JPEG</option>
                      <option value="image/webp">WebP</option>
                    </select>
                  </div>
                </div>

                <div>
                  <label>출력 파일명</label>
                  <div class="field">
                    <input id="outName" type="text" value="output" />
                  </div>
                </div>
              </div>

              <div id="qualityWrap" class="field">
                <label style="margin: 0 0 8px">품질 (JPEG/WebP)</label>
                <div class="range">
                  <input
                    id="quality"
                    type="range"
                    min="0"
                    max="1"
                    step="0.01"
                    value="0.9"
                  />
                  <div
                    class="pill"
                    style="
                      padding: 8px 10px;
                      min-width: 88px;
                      text-align: center;
                    "
                  >
                    <b id="qVal" class="mono">0.90</b>
                  </div>
                </div>
                <div class="help">
                  PNG는 품질(quality) 옵션이 적용되지 않습니다.
                </div>
              </div>

              <div
                class="row"
                style="justify-content: space-between; margin-top: 4px"
              >
                <button id="apply" class="btn" type="button">변환 적용</button>
                <div class="row">
                  <button id="download" class="btn secondary" type="button">
                    다운로드
                  </button>
                </div>
              </div>

              <div class="pill">
                <div><b>변환 결과</b></div>
                <div id="resultInfo" class="mono">-</div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <section class="card" style="margin-top: 16px">
        <h2>3) 미리보기</h2>
        <div class="imgbox">
          <div class="preview">
            <div>
              <div class="imgframe">
                <div class="badge">원본</div>
                <img id="imgIn" alt="원본 미리보기" />
                <div id="emptyIn" class="empty">
                  이미지를 업로드하면 원본 미리보기가 표시됩니다.
                </div>
              </div>
              <div class="footerbar">
                <div class="small" id="inInfo">-</div>
              </div>
            </div>

            <div>
              <div class="imgframe">
                <div class="badge">출력</div>
                <img id="imgOut" alt="출력 미리보기" />
                <div id="emptyOut" class="empty">
                  “변환 적용”을 누르면 출력 미리보기가 표시됩니다.
                </div>
              </div>
              <div class="footerbar">
                <div class="small" id="outInfo">-</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);

      const fileEl = $("file");
      const dropEl = $("drop");
      const clearBtn = $("clear");

      const metaDim = $("metaDim");
      const metaSize = $("metaSize");
      const metaType = $("metaType");
      const metaName = $("metaName");

      const wEl = $("w");
      const hEl = $("h");
      const lockEl = $("lock");
      const lockWrap = $("lockWrap");

      const fmtEl = $("fmt");
      const outNameEl = $("outName");
      const qualityWrap = $("qualityWrap");
      const qualityEl = $("quality");
      const qValEl = $("qVal");

      const applyBtn = $("apply");
      const downloadBtn = $("download");

      const imgIn = $("imgIn");
      const imgOut = $("imgOut");
      const emptyIn = $("emptyIn");
      const emptyOut = $("emptyOut");

      const inInfo = $("inInfo");
      const outInfo = $("outInfo");
      const resultInfo = $("resultInfo");
      const toast = $("toast");

      let originalFile = null;
      let originalBitmap = null;

      let originalWidth = 0;
      let originalHeight = 0;
      let aspect = 1;

      let lastBlob = null;
      let lastBlobUrl = null;

      function fmtBytes(bytes) {
        if (!Number.isFinite(bytes)) return "-";
        const units = ["B", "KB", "MB", "GB"];
        let i = 0,
          n = bytes;
        while (n >= 1024 && i < units.length - 1) {
          n /= 1024;
          i++;
        }
        return `${n.toFixed(i === 0 ? 0 : 2)} ${units[i]}`;
      }

      function extFromMime(mime) {
        if (mime === "image/png") return "png";
        if (mime === "image/jpeg") return "jpg";
        if (mime === "image/webp") return "webp";
        return "img";
      }

      function showToast(msg, isError = false) {
        toast.textContent = msg;
        toast.style.borderColor = isError
          ? "rgba(255,106,106,.35)"
          : "rgba(255,255,255,.16)";
        toast.style.color = isError ? "#ffd2d2" : "var(--muted)";
        toast.classList.add("show");
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => toast.classList.remove("show"), 3000);
      }

      function updateQualityUI() {
        const mime = fmtEl.value;
        const isPNG = mime === "image/png";
        qualityWrap.style.opacity = isPNG ? "0.45" : "1";
        qualityEl.disabled = isPNG;
      }

      function setMetaEmpty() {
        metaDim.textContent = "-";
        metaSize.textContent = "-";
        metaType.textContent = "-";
        metaName.textContent = "-";
        inInfo.textContent = "-";
        outInfo.textContent = "-";
        resultInfo.textContent = "-";
      }

      function resetOutput() {
        lastBlob = null;
        if (lastBlobUrl) URL.revokeObjectURL(lastBlobUrl);
        lastBlobUrl = null;
        imgOut.style.display = "none";
        emptyOut.style.display = "block";
        outInfo.textContent = "-";
        resultInfo.textContent = "-";
      }

      function resetAll() {
        originalFile = null;
        originalBitmap = null;
        originalWidth = 0;
        originalHeight = 0;
        aspect = 1;

        fileEl.value = "";
        imgIn.style.display = "none";
        emptyIn.style.display = "block";
        setMetaEmpty();
        resetOutput();

        if (imgIn.src) URL.revokeObjectURL(imgIn.src);
        imgIn.src = "";
        showToast("초기화되었습니다.");
      }

      async function loadFile(file) {
        if (!file) return;
        if (!file.type.startsWith("image/")) {
          showToast("이미지 파일이 아닙니다.", true);
          return;
        }

        resetOutput();
        originalFile = file;

        // 원본 미리보기 URL
        if (imgIn.src) URL.revokeObjectURL(imgIn.src);
        const inUrl = URL.createObjectURL(file);
        imgIn.src = inUrl;
        imgIn.onload = () => {
          imgIn.style.display = "block";
          emptyIn.style.display = "none";
        };

        // Bitmap 로딩
        try {
          originalBitmap = await createImageBitmap(file);
        } catch (e) {
          showToast("브라우저에서 이미지 디코딩에 실패했습니다.", true);
          console.error(e);
          return;
        }

        originalWidth = originalBitmap.width;
        originalHeight = originalBitmap.height;
        aspect = originalWidth / originalHeight;

        // 기본값: 원본 유지
        wEl.value = originalWidth;
        hEl.value = originalHeight;

        // 메타 표시
        metaDim.textContent = `${originalWidth} x ${originalHeight}`;
        metaSize.textContent = fmtBytes(file.size);
        metaType.textContent = file.type || "unknown";
        metaName.textContent = file.name || "-";
        inInfo.textContent = `원본: ${originalWidth}x${originalHeight} · ${fmtBytes(
          file.size
        )} · ${file.type}`;

        // 파일명 default
        const base = (file.name || "output").replace(/\.[^.]+$/, "");
        outNameEl.value = `${base}_resized`;

        showToast("이미지 로드 완료.");
      }

      function bindAspectLock() {
        // 가로 변경 시 세로 자동
        wEl.addEventListener("input", () => {
          if (!originalBitmap) return;
          if (!lockEl.checked) return;

          const w = Math.max(1, parseInt(wEl.value || "1", 10));
          const h = Math.round(w / aspect);
          hEl.value = h;
        });

        // 세로 변경 시 가로 자동
        hEl.addEventListener("input", () => {
          if (!originalBitmap) return;
          if (!lockEl.checked) return;

          const h = Math.max(1, parseInt(hEl.value || "1", 10));
          const w = Math.round(h * aspect);
          wEl.value = w;
        });

        lockWrap.addEventListener("click", (e) => {
          // 토글 영역 클릭 시 체크 반전 (input 클릭은 중복 방지)
          if (e.target.tagName.toLowerCase() !== "input") {
            lockEl.checked = !lockEl.checked;
            showToast(lockEl.checked ? "비율 유지: ON" : "비율 유지: OFF");
          }
        });
      }

      async function applyResize() {
        if (!originalBitmap) {
          showToast("먼저 이미지를 업로드하세요.", true);
          return;
        }

        const w = Math.max(1, parseInt(wEl.value || "1", 10));
        const h = Math.max(1, parseInt(hEl.value || "1", 10));
        const mime = fmtEl.value;
        const quality = parseFloat(qualityEl.value);

        // Canvas 생성
        const canvas = document.createElement("canvas");
        canvas.width = w;
        canvas.height = h;
        const ctx = canvas.getContext("2d", { alpha: true });

        // 고품질 스케일링
        ctx.imageSmoothingEnabled = true;
        ctx.imageSmoothingQuality = "high";
        ctx.clearRect(0, 0, w, h);
        ctx.drawImage(originalBitmap, 0, 0, w, h);

        // blob 생성
        const blob = await new Promise((resolve) => {
          if (mime === "image/png") {
            canvas.toBlob(resolve, mime);
          } else {
            canvas.toBlob(resolve, mime, quality);
          }
        });

        if (!blob) {
          showToast("출력 생성(toBlob) 실패", true);
          return;
        }

        // 기존 url 정리
        if (lastBlobUrl) URL.revokeObjectURL(lastBlobUrl);

        lastBlob = blob;
        lastBlobUrl = URL.createObjectURL(blob);

        imgOut.src = lastBlobUrl;
        imgOut.onload = () => {
          imgOut.style.display = "block";
          emptyOut.style.display = "none";
        };

        const qText =
          mime === "image/png"
            ? "quality N/A"
            : `quality ${quality.toFixed(2)}`;
        outInfo.textContent = `출력: ${w}x${h} · ${fmtBytes(
          blob.size
        )} · ${mime} · ${qText}`;
        resultInfo.textContent = `${w}x${h} | ${mime} | ${fmtBytes(
          blob.size
        )} | ${qText}`;

        showToast("변환 완료.");
      }

      function download() {
        if (!lastBlob) {
          showToast("먼저 “변환 적용”을 누르세요.", true);
          return;
        }
        const mime = fmtEl.value;
        const ext = extFromMime(mime);
        const base =
          (outNameEl.value || "output").replace(/[\\/:*?"<>|]+/g, "_").trim() ||
          "output";
        const filename = `${base}.${ext}`;

        const a = document.createElement("a");
        a.href = lastBlobUrl;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        a.remove();
        showToast(`다운로드 시작: ${filename}`);
      }

      // events
      fileEl.addEventListener("change", (e) => loadFile(e.target.files?.[0]));
      clearBtn.addEventListener("click", resetAll);

      fmtEl.addEventListener("change", () => {
        updateQualityUI();
        resetOutput();
      });

      qualityEl.addEventListener("input", () => {
        qValEl.textContent = Number(qualityEl.value).toFixed(2);
        resetOutput();
      });

      wEl.addEventListener("input", () => resetOutput());
      hEl.addEventListener("input", () => resetOutput());
      outNameEl.addEventListener("input", () => {
        /* 파일명만 변경 */
      });

      applyBtn.addEventListener("click", applyResize);
      downloadBtn.addEventListener("click", download);

      // drop zone
      dropEl.addEventListener("dragover", (e) => {
        e.preventDefault();
        dropEl.classList.add("dragover");
      });
      dropEl.addEventListener("dragleave", () =>
        dropEl.classList.remove("dragover")
      );
      dropEl.addEventListener("drop", (e) => {
        e.preventDefault();
        dropEl.classList.remove("dragover");
        const file = e.dataTransfer.files?.[0];
        if (file) loadFile(file);
      });

      // init
      updateQualityUI();
      bindAspectLock();
      setMetaEmpty();
      qValEl.textContent = Number(qualityEl.value).toFixed(2);
    </script>
  </body>
</html>
```
